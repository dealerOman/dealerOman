<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DealerOman - Calculator</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
          rel="stylesheet">
</head>
<body class="bg-light">

<!-- Navbar -->
<header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">

            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <img src="Logo.png" alt="DealerOman logo" width="60" height="60" class="me-2">
                <span class="fw-bold">DealerOman</span>
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#mainNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="mainNavbar">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">

                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="categories.html">Categories</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="freelancers.html">Freelancers</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="questionnaire.html">Questionnaire</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link active" href="calculate.html">Calculator</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="funpage.html">Fun page</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About us</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact us</a>
                    </li>

                </ul>
            </div>
        </div>
    </nav>
</header>

<main class="container my-4">

    <h2 class="h4 mb-3 text-danger">DealerOman simple calculator</h2>

    <p class="mb-3">
        This page calculates an estimated total price for a listing.
        We use JavaScript from the slides: form inputs, onclick, functions, if/else, and simple math.
    </p>

    <!-- Result area -->
    <div id="calcResult" class="alert alert-info d-none">
        <!-- We will write the calculation result here -->
    </div>

    <!-- Calculator form -->
    <!-- we use onsubmit so we can stop the default submit -->
    <form name="calcForm" onsubmit="return calculateTotal()" class="bg-white p-4 rounded-3 border">

        <!-- Item type -->
        <div class="row mb-3">
            <div class="col-sm-3">
                <label for="itemType">Item type</label>
            </div>
            <div class="col-sm-9">
                <select id="itemType" name="itemType" class="form-control">
                    <option value="">-- select type --</option>
                    <option value="car">Car listing</option>
                    <option value="electronics">Electronics listing</option>
                    <option value="property">Property listing</option>
                </select>
            </div>
        </div>

        <!-- Base price -->
        <div class="row mb-3">
            <div class="col-sm-3">
                <label for="basePrice">Base price (OMR)</label>
            </div>
            <div class="col-sm-9">
                <input type="text" id="basePrice" name="basePrice" class="form-control">
            </div>
        </div>

        <!-- Quantity -->
        <div class="row mb-3">
            <div class="col-sm-3">
                <label for="qty">Quantity</label>
            </div>
            <div class="col-sm-9">
                <input type="text" id="qty" name="qty" class="form-control">
            </div>
        </div>

        <!-- Service fee choice (radio) -->
        <div class="row mb-3">
            <div class="col-sm-3">
                <span>Service fee</span>
            </div>
            <div class="col-sm-9">
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="fee" id="feeStandard" value="standard">
                    <label class="form-check-label" for="feeStandard">
                        Standard (5% of subtotal)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="fee" id="feePremium" value="premium">
                    <label class="form-check-label" for="feePremium">
                        Premium (10% of subtotal)
                    </label>
                </div>
            </div>
        </div>

        <!-- Discount checkbox -->
        <div class="row mb-3">
            <div class="col-sm-3">
                <span>Discount</span>
            </div>
            <div class="col-sm-9">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="studentDisc" name="studentDisc" value="yes">
                    <label class="form-check-label" for="studentDisc">
                        Student discount (5% off total)
                    </label>
                </div>
            </div>
        </div>

        <!-- Button -->
        <div class="text-end">
            <input type="submit" value="Calculate total" class="btn btn-danger">
        </div>

    </form>

</main>

<!-- Footer -->
<footer class="bg-dark text-light text-center py-3 mt-4">
    <div class="container">
        <small>Â© 2025 DealerOman - Sultan Qaboos University project</small>
    </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

<script type="text/javascript">
/*
  This function reads the values from the form,
  calculates subtotal, service fee, discount, and final total.
*/
function calculateTotal() {
    var f = document.forms["calcForm"];

    var type = f["itemType"].value;
    var basePrice = f["basePrice"].value;
    var qty = f["qty"].value;

    // convert to numbers
    var priceNumber = Number(basePrice);
    var qtyNumber   = Number(qty);

    // check basic required fields
    if (type == "") {
        alert("Please select the item type.");
        return false;
    }

    if (basePrice == "" || isNaN(priceNumber) || priceNumber <= 0) {
        alert("Please enter a valid base price.");
        f["basePrice"].focus();
        return false;
    }

    if (qty == "" || isNaN(qtyNumber) || qtyNumber <= 0) {
        alert("Please enter a valid quantity.");
        f["qty"].focus();
        return false;
    }

    // calculate subtotal
    var subtotal = priceNumber * qtyNumber;

    // read service fee option
    var feeType = "";
    var feeRadios = f["fee"];
    var i;
    for (i = 0; i < feeRadios.length; i++) {
        if (feeRadios[i].checked) {
            feeType = feeRadios[i].value;
        }
    }

    var feeRate = 0;
    if (feeType == "standard") {
        feeRate = 0.05; // 5%
    } else if (feeType == "premium") {
        feeRate = 0.10; // 10%
    }

    var feeAmount = subtotal * feeRate;

    // check discount
    var discountRate = 0;
    if (f["studentDisc"].checked) {
        discountRate = 0.05; // 5% discount
    }

    // total before discount
    var totalBeforeDiscount = subtotal + feeAmount;

    // discount amount on total
    var discountAmount = totalBeforeDiscount * discountRate;

    // final total
    var finalTotal = totalBeforeDiscount - discountAmount;

    // round to 3 decimals to look nicer
    finalTotal = Math.round(finalTotal * 1000) / 1000;
    subtotal   = Math.round(subtotal * 1000) / 1000;
    feeAmount  = Math.round(feeAmount * 1000) / 1000;
    discountAmount = Math.round(discountAmount * 1000) / 1000;

    // build a small message for the user
    var msg = "Item type: " + type + "\n";
    msg = msg + "Subtotal: " + subtotal + " OMR\n";
    msg = msg + "Service fee: " + feeAmount + " OMR\n";
    msg = msg + "Discount: " + discountAmount + " OMR\n";
    msg = msg + "Final total: " + finalTotal + " OMR";

    // show in alert
    alert(msg);

    // also show in the page
    var box = document.getElementById("calcResult");
    box.className = "alert alert-info"; // make it visible
    box.innerHTML =
        "<strong>Calculation result:</strong><br>" +
        "Item type: " + type + "<br>" +
        "Subtotal: " + subtotal + " OMR<br>" +
        "Service fee: " + feeAmount + " OMR<br>" +
        "Discount: " + discountAmount + " OMR<br>" +
        "Final total: <strong>" + finalTotal + " OMR</strong>";

    // stop normal form submit
    return false;
}
</script>

</body>
</html>